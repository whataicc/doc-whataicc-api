---
weight: 7
bookFlatSection: true
title: "本地图片解析"

seo_title: "本地图片解析_如何使用OpenAI中转API"
description: "了解神马中转API的使用方法，掌握如何配置和调用中转API服务，轻松解决接口调用难题。"
keywords: ["神马中转API", "如何使用中转API", "中转API服务"]
tags: ["API", "中转API", "服务使用"]
categories: ["技术教程", "API文档"]

author: "神马中转API（api.whatai.cc）"
---

# 本地图片解析



## **接口说明**

----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

通过多模态AI模型分析图片内容，支持OCR和图片信息提取功能。

**主流图片分析模型**

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

| **模型名称** | **描述** |
| --- | --- |
| gpt-4o | 目前图片分析调用量最大的模型，稳定、并发高 |
| gemini-2.5-flash | 谷歌旗舰模型，速度快，性价比好 |
| claude-sonnet-4-20250514 | 图片分析做的不错，但性价比略差 |
| doubao-1.5-vision-pro-250328 | 国内图片分析主流模型，性价比好，稳定、并发高 |

## **本地图片分析预处理**


------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

需要先把本地图片转为 `base64` 再提交给模型。

## **参数说明**
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

*   `model`: 指定使用的AI模型

*   `messages`: 包含用户指令和图片数据

*   `temperature`: 控制输出随机性(0-1)

*   `image_url`: 支持Base64编码的本地图片或网络图片URL

## **请求示例**


------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

```python

import base64
import requests

def encode_image(image_path):
    """将本地图片编码为Base64字符串"""
    with open(image_path, "rb") as image_file:
        return base64.b64encode(image_file.read()).decode("utf-8")

# API配置
BASE_URL = "https://api.whatai.cc/"
API_ENDPOINT = BASE_URL + "v1/chat/completions"
API_KEY = "sk-******"  # 替换为你的API密钥

# 准备请求数据
image_data = encode_image("example.png")  # 本地图片路径

payload = {
    "model": "gpt-4o",  # 指定分析模型
    "messages": [
        {
            "role": "user",
            "content": [
                {"type": "text", "text": "请分析图片内容"},
                {
                    "type": "image_url",
                    "image_url": {
                        "url": f"data:image/png;base64,{image_data}"
                    }
                }
            ]
        }
    ],
    "temperature": 0.1
}

headers = {
    "Content-Type": "application/json",
    "Authorization": f"Bearer {API_KEY}"
}

# 发送请求
response = requests.post(API_ENDPOINT, headers=headers, json=payload)
print(response.json())  # 输出响应结果
```

## **注意事项**

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

1.   图片需小于20MB

2.   支持PNG/JPEG格式；非普通扩展名的图片（例如.file）请先处理成`base64`再给模型。

3.   响应时间取决于图片大小和模型选择